{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/display.js","webpack:///./src/app.js","webpack:///./src/chip8.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","backgroundColor","width","height","ctx","document","getElementById","getContext","window","chip","display","this","reset","address","bytes","by","Memory","PC","Stack","Array","V","I","DelayTimer","SoundTimer","opcode","x","y","kk","nnn","clear","pop","push","Math","floor","random","fillStyle","fillRect"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const backgroundColor = \"#10203c\";\nconst foregroundColor = \"#ddd\";\nconst width = 64;\nconst height = 32;\n\nexport class Display {\n    constructor(ctx) {\n        this.ctx = ctx;\n    }\n\n    clear() {\n        this.ctx.fillStyle = backgroundColor;\n        this.ctx.fillRect(0, 0, width, height);\n    }\n}\n","import { Display } from './display';\nimport { Chip8 } from './chip8';\n\nconst canvas = document.getElementById('display');\nconst ctx = canvas.getContext('2d');\n\nwindow.chip = new Chip8(new Display(ctx));\n\n","export class Chip8 {\n    constructor(display) {\n        this.display = display;\n        this.reset();\n    }\n\n    load(address, bytes) {\n        for(const by in bytes) {\n            this.Memory[address++] = by;\n        }\n    }\n\n    reset() {\n        this.PC = 0x200;\n        this.Stack = [];\n        this.Memory = Array(4096);\n        this.V = Array(15);\n        this.I = 0;\n        this.DelayTimer = 0;\n        this.SoundTimer = 0;\n        //this.display.clear();\n    }\n\n    get state() {\n        return {\n            PC: this.PC,\n            Stack: this.Stack,\n            V: this.V,\n            I: this.I,\n            DelayTimer: this.DelayTimer,\n            SoundTimer: this.SoundTimer\n        }\n    }\n\n    advanceEmulator() {\n        const opcode = this.Memory[this.PC] << 8 | this.Memory[this.PC+1];\n        const n = opcode & 0x000f;\n        const x = (opcode >> 8) & 0x0f;\n        const y = (opcode >> 4) & 0x0f;\n        const kk = opcode & 0xff;\n        const nnn = opcode & 0x0fff;\n\n        switch (opcode & 0xf000) {\n            case 0x0000:\n                if (opcode === 0x00e0) {\n                    this.display.clear();\n                } else if (opcode === 0x00ee) {\n                    this.PC = this.Stack.pop();\n                } else {\n                    throw `Invalid opcode: ${this.opcode}`;\n                }\n                this.PC += 2;\n                break;\n            case 0x1000:\n                this.PC = nnn;\n                break;\n            case 0x2000:\n                this.Stack.push(this.PC);\n                this.PC = nnn;\n                break;\n            case 0x3000:\n                this.PC += (this.V[x] === kk) ? 4 : 2;\n                break;\n            case 0x4000:\n                this.PC += (this.V[x] === kk) ? 2 : 4;\n                break;\n            case 0x5000:\n                this.PC += (this.V[x] === this.V[y]) ? 4 : 2;\n                break;\n            case 0x6000:\n                this.V[x] = kk;\n                this.PC += 2;\n                break;\n            case 0x7000:\n                this.V[x] = this.V[x] + kk;\n                this.PC += 2;\n                break;\n            case 0x8000:\n                switch (n) {\n                    case 0:\n                        this.V[x] = this.V[y];\n                        this.PC += 2;\n                        break;\n                    case 1:\n                        this.V[x] = this.V[x] | this.V[y];\n                        this.PC += 2;\n                        break;\n                    case 2:\n                        this.V[x] = this.V[x] & this.V[y];\n                        this.PC += 2;\n                        break;\n                    case 3:\n                        this.V[x] = this.V[x] ^ this.V[y];\n                        this.PC += 2;\n                        break;\n                    case 4:\n                        this.V[x] = this.V[x] + this.V[y];\n                        this.V[0xf] = (this.V[x] > 255) ? 1 : 0;\n                        this.V[x] = this.V[x] & 0xff;\n                        this.PC += 2;\n                        break;\n                    case 5:\n                        this.V[0xf] = this.V[y] > this.V[x] ? 1 : 0;\n                        this.V[x] = this.V[x] - this.V[y];\n                        this.PC += 2;\n                        break;\n                    case 6:\n                        this.V[0xf] = this.V[x] & 1;\n                        this.V[x] = this.V[x] >> 1;\n                        this.PC += 2;\n                        break;\n                    case 7:\n                        this.V[0xf] = this.V[y] > this.V[x] ? 1 : 0;\n                        this.V[x] = this.V[y] - this.V[x];\n                        this.PC += 2;\n                        break;\n                    case 0xE:\n                        this.V[0xf] = this.V[x] & 0x80 ? 1 : 0;\n                        this.V[x] = this.V[x] << 1;\n                        this.PC += 2;\n                        break;\n                }\n                break;\n            case 0x9000:\n                this.PC += this.V[x] != this.V[y] ? 4 : 2;\n                break;\n            case 0xA000:\n                this.I = nnn;\n                this.PC += 2;\n                break;\n            case 0xB000:\n                this.PC = nnn + this.V[0];\n                break;\n            case 0xC000:\n                this.V[x] = Math.floor(Math.random()*255) & kk;\n                this.PC += 2;\n                break;\n            case 0xD000:\n                //Display n-byte sprite starting at memory location I at (Vx, Vy), set VF = collision.\n                //The interpreter reads n bytes from memory, starting at the address stored in I. These bytes are then displayed as sprites on screen at coordinates (Vx, Vy). Sprites are XORed onto the existing screen. If this causes any pixels to be erased, VF is set to 1, otherwise it is set to 0. If the sprite is positioned so part of it is outside the coordinates of the display, it wraps around to the opposite side of the screen. See instruction 8xy3 for more information on XOR, and section 2.4, Display, for more information on the Chip-8 screen and sprites.\n                this.PC += 2;\n                break;\n            case 0xE000:\n                if (kk === 0x9e) {\n                    //Skip next instruction if key with the value of Vx is pressed.\n                    //Checks the keyboard, and if the key corresponding to the value of Vx is currently in the down position, PC is increased by 2.\n                    this.PC += 2;\n                } else if (kk === 0xA1) {\n                    //Skip next instruction if key with the value of Vx is not pressed.\n                    //Checks the keyboard, and if the key corresponding to the value of Vx is currently in the up position, PC is increased by 2.\n                    this.PC += 4;\n                } else {\n                    throw `Invalid opcode: ${opcode}`;\n                }\n                break;\n            case 0xF000:\n                switch (kk) {\n                    case 0x07:\n                        this.V[x] = this.DelayTimer;\n                        this.PC += 2;\n                        break;\n                    case 0x0a:\n                        //Wait for a key press, store the value of the key in Vx.\n                        //All execution stops until a key is pressed, then the value of that key is stored in Vx.\n                        throw new `Opcode ${opcode} not implemented yet`;\n                        this.PC += 2;\n                        break;\n                    case 0x15:\n                        this.DelayTimer = this.V[x];\n                        this.PC += 2;\n                        break;\n                    case 0x18:\n                        this.SoundTimer = this.V[x];\n                        this.PC += 2;\n                        break;\n                    case 0x1e:\n                        this.I = this.I + this.V[x];\n                        this.PC += 2;\n                        break;\n                    case 0x29:\n                        //Set I = location of sprite for digit Vx.\n                        //The value of I is set to the location for the hexadecimal sprite corresponding to the value of Vx. See section 2.4, Display, for more information on the Chip-8 hexadecimal font.\n                        throw new `Opcode ${opcode} not implemented yet`;\n                        this.PC += 2;\n                        break;\n                    case 0x33:\n                        this.Memory[I]   = (this.V[x] % 1000) / 100; // hundred's\n                        this.Memory[I+1] = (this.V[x] % 100) / 10;   // ten's\n                        this.Memory[I+2] = (this.V[x] % 10);         // one's\n                        this.PC += 2;\n                        break;\n                    case 0x55:\n                        for (let i=0; i<=x; i++) {\n                            this.Memory[I+i] = this.V[i];\n                        }\n                        this.PC += 2;\n                        break;\n                    case 0x65:\n                        for (let i=0; i<=x; i++) {\n                            this.V[i] = this.Memory[I+i];\n                        }\n                        this.PC += 2;\n                        break;\n                    default:\n                        throw new `Invalid opcode: ${opcode}`;\n                }\n        }\n    }\n\n    updateTimers() {\n    }\n}\n"],"sourceRoot":""}