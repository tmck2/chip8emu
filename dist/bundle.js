!function(t){var s={};function e(i){if(s[i])return s[i].exports;var h=s[i]={i:i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var h in t)e.d(i,h,function(s){return t[s]}.bind(null,h));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=0)}([function(t,s,e){"use strict";e.r(s);const i="#10203c",h=64,r=32;const a=document.getElementById("display").getContext("2d");window.chip=new class{constructor(t){this.display=t,this.reset()}load(t,s){for(const e in s)this.Memory[t++]=e}reset(){this.PC=512,this.Stack=[],this.Memory=Array(4096),this.V=Array(15),this.I=0,this.DelayTimer=0,this.SoundTimer=0}get state(){return{PC:this.PC,Stack:this.Stack,V:this.V,I:this.I,DelayTimer:this.DelayTimer,SoundTimer:this.SoundTimer}}advanceEmulator(){const t=this.Memory[this.PC]<<8|this.Memory[this.PC+1],s=15&t,e=t>>8&15,i=t>>4&15,h=255&t,r=4095&t;switch(61440&t){case 0:if(224===t)this.display.clear();else{if(238!==t)throw`Invalid opcode: ${this.opcode}`;this.PC=this.Stack.pop()}this.PC+=2;break;case 4096:this.PC=r;break;case 8192:this.Stack.push(this.PC),this.PC=r;break;case 12288:this.PC+=this.V[e]===h?4:2;break;case 16384:this.PC+=this.V[e]===h?2:4;break;case 20480:this.PC+=this.V[e]===this.V[i]?4:2;break;case 24576:this.V[e]=h,this.PC+=2;break;case 28672:this.V[e]=this.V[e]+h,this.PC+=2;break;case 32768:switch(s){case 0:this.V[e]=this.V[i],this.PC+=2;break;case 1:this.V[e]=this.V[e]|this.V[i],this.PC+=2;break;case 2:this.V[e]=this.V[e]&this.V[i],this.PC+=2;break;case 3:this.V[e]=this.V[e]^this.V[i],this.PC+=2;break;case 4:this.V[e]=this.V[e]+this.V[i],this.V[15]=this.V[e]>255?1:0,this.V[e]=255&this.V[e],this.PC+=2;break;case 5:this.V[15]=this.V[i]>this.V[e]?1:0,this.V[e]=this.V[e]-this.V[i],this.PC+=2;break;case 6:this.V[15]=1&this.V[e],this.V[e]=this.V[e]>>1,this.PC+=2;break;case 7:this.V[15]=this.V[i]>this.V[e]?1:0,this.V[e]=this.V[i]-this.V[e],this.PC+=2;break;case 14:this.V[15]=128&this.V[e]?1:0,this.V[e]=this.V[e]<<1,this.PC+=2}break;case 36864:this.PC+=this.V[e]!=this.V[i]?4:2;break;case 40960:this.I=r,this.PC+=2;break;case 45056:this.PC=r+this.V[0];break;case 49152:this.V[e]=Math.floor(255*Math.random())&h,this.PC+=2;break;case 53248:this.PC+=2;break;case 57344:if(158===h)this.PC+=2;else{if(161!==h)throw`Invalid opcode: ${t}`;this.PC+=4}break;case 61440:switch(h){case 7:this.V[e]=this.DelayTimer,this.PC+=2;break;case 10:throw new`Opcode ${t} not implemented yet`;case 21:this.DelayTimer=this.V[e],this.PC+=2;break;case 24:this.SoundTimer=this.V[e],this.PC+=2;break;case 30:this.I=this.I+this.V[e],this.PC+=2;break;case 41:throw new`Opcode ${t} not implemented yet`;case 51:this.Memory[I]=this.V[e]%1e3/100,this.Memory[I+1]=this.V[e]%100/10,this.Memory[I+2]=this.V[e]%10,this.PC+=2;break;case 85:for(let t=0;t<=e;t++)this.Memory[I+t]=this.V[t];this.PC+=2;break;case 101:for(let t=0;t<=e;t++)this.V[t]=this.Memory[I+t];this.PC+=2;break;default:throw new`Invalid opcode: ${t}`}}}updateTimers(){}}(new class{constructor(t){this.ctx=t}clear(){this.ctx.fillStyle=i,this.ctx.fillRect(0,0,h,r)}}(a))}]);
//# sourceMappingURL=bundle.js.map